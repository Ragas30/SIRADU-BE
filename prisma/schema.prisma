generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String            @id @default(cuid())
  role                Role
  name                String
  email               String            @unique
  password            String
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  onShift             NurseStatus
  reposisiHistory     ReposisiHistory[]
}

enum NurseStatus {
  ON_SHIFT
  OFF_SHIFT
}

enum Role {
  KEPALA_PERAWAT
  PERAWAT
}

model Patient {
  id           String             @id @default(cuid())
  name         String
  nik          String             @unique
  birthDate    DateTime
  bedCode      String
  gender       Gender
  status       Status
  createdAt    DateTime           @default(now())
  updatedAt    DateTime           @updatedAt
  conditions   PatientCondition[]
  reposisi     ReposisiHistory[]
}

enum Gender {
  LAKI_LAKI
  PEREMPUAN
}

enum Status {
  ACTIVE
  NON_ACTIVE
}

model PatientCondition {
  id                String    @id @default(cuid())
  perceptionSensory String
  humidity          String
  activity          String
  mobilistaion      String
  risk              Resiko
  pasienId          String
  pasien            Patient   @relation(fields: [pasienId], references: [id])
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
}

enum Resiko {
  TINGGI
  SEDANG
  RENDAH
  SANGAT_TINGGI
}

model ReposisiHistory {
  id            String    @id @default(cuid())
  patientId     String
  position      String
  nurseId       String
  skinCondition String
  timestamp     DateTime  @default(now())
  foto          String?
  patient       Patient   @relation(fields: [patientId], references: [id])
  nurse         User      @relation(fields: [nurseId], references: [id])
}
